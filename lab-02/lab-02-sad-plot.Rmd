---
title: "Lab 02 - Take a sad plot and make it better"
output: 
  tufte::tufte_html:
    css: ../lab.css
    tufte_variant: "envisioned"
    highlight: pygments
link-citations: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(eval = TRUE)
```

In this lab your task is to improve a plot that violates many data visualization best practices.
We want you to get creative and make a visualisation that tells a (much!) better story than the original plot.

# Learning goals

-   Telling a story with data.
-   Data visualization best practices.
-   Reshaping data.

::: {.home}
Complete the following steps before you come to the workshop!
:::

# Workshop prep

You have **two** tasks you should complete before the workshop.
It is crucial you do these before the workshop to ensure a smooth (and enjoyable!) experience during the workshop:

-   **Confirm GitHub org membership:** Confirm that you are a member of the course [GitHub organization](https://github.com/ids-s1-21). If not, please do the [first time setup instructions](https://github.com/ids-s1-21). If you have already done these and are still not a member, please let me know **asap**, before the night before the workshop.
-   **Meet your teammates:** You can find your team for the rest of the semester [here](https://github.com/orgs/ids-s1-21/teams) (it will be a "\<teamname\>" and not "group_\<num\>" - that was only for week 1). Make sure to contact your teammates if you haven't already. You can do this via:
	- __Piazza__: You can put a tag so only your teammates and the course organizers can see your posts. To do this, when making a post just select "Class Group" next to "Post to", and then select your group from the drop down box. If you have not yet joined piazza, please follow [these instructions](https://idsed.digital/troubleshoot/setup/piazza/) and I'll add you to your team thoughout the week.
	- __GitHub__: On the team page on GitHub there is a discussion section (_Note_: Course Organizers will probably not check these).
	- Any other means you want (e.g. WhatsApp, email, ect.)
	
If you are in a team by yourself (maybe your teammates moved workshop slots?) or do not yet have a team, please contact david (david.elliot@ed.ac.uk).

::: {.video}
Complete the following steps during the workshop with your team.
:::

# Warm up with your team

Take 5 minutes to go around the team, each pointing out one error in the following visual.

```{r echo=FALSE}
knitr::include_graphics("img/Speaking-the-world.jpg")
```

Once you're done with this, give a number to each team member.
```{marginfigure}
If you want to assign numbers at random, you can go to the [Random.org sequence generator](https://www.random.org/sequences/?min=1&max=4&col=1&format=html&rnd=new), and assign the first number that appears to the person whose name is first in the alphabet, and so on.  Skip over any numbers that are larger than the size of your team.
```
In this lab, team members will take turns sharing their screen and working on an exercise in the common team repo, commit and push their changes, and then the next team member will take over and **pull** the changes before they make any further changes to their lab.
In the lab instructions you'll see markers for

-   **EVERYONE** (for tasks everyone should do concurrently) or
-   **TEAM MEMBER X** (for tasks only team member X should do while sharing their screen and others contributing verbally but not typing anything).

# Getting started

## Repository

**EVERYONE:** Go to course [GitHub organization](https://github.com/ids-s1-21) and locate your Lab 02 repo, which should be named `lab-02-sad-plot-YOUR_TEAMNAME`.
Grab the URL of the repo, and clone it in RStudio Cloud.
Refer to [these instructions](https://idsed.digital/troubleshoot/setup/openingaproject/) if you would like to see step-by-step instructions for cloning a repo into an RStudio project and setting up the project with GitHub.

First, open the R Markdown document `lab-02.Rmd` and knit it.
Make sure it compiles without errors.
The output will be a markdown document (`.md`) file with the same name.

## Packages

**EVERYONE:** Before getting started with the Exercises, run the following code in the Console to load this package.

```{r load-packages, message=FALSE, warning=FALSE, eval=TRUE}
library(tidyverse)
```

## Data: Instructional staff employment trends

The American Association of University Professors (AAUP) is a nonprofit membership association of faculty and other academic professionals.
[This report](https://www.aaup.org/sites/default/files/files/AAUP_Report_InstrStaff-75-11_apr2013.pdf) compiled by the AAUP shows trends in instructional staff employees between 1975 and 2011, and contains an image very similar to the one given below.

```{r echo=FALSE, fig.fullwidth=TRUE}
knitr::include_graphics("img/staff-employment.png")
```

**EVERYONE:** Let's start by loading the data used to create this plot.

```{r load-data-staff, message=FALSE, eval=TRUE}
staff <- read_csv("data/instructional-staff.csv")
```

Each row in this dataset represents a faculty type, and the columns are the years for which we have data.
The values are percentage of hires of that type of faculty for each year.

```{r echo=FALSE}
staff
```

In order to recreate this visualization we need to first reshape the data to have one variable for faculty type and one variable for year.
In other words, we will convert the data from the long format to wide format.

# Exercises

**1Ô∏è‚É£ TEAM MEMBER 1 should write the answer to Exercises 1, and then commit and and push their changes. Everyone else: participate, help out, but no typing in the R Markdown document and no committing/pushing!**
```{marginfigure}
If someone in your team is participating remotely, TEAM MEMBER 1 will need to share their screen on Zoom - see Learn page for links.
```

1.  If the long data will have a row for each year/faculty type combination, and there are 5 faculty types and 11 years of data, how many rows will the data have? Discuss as a team and write down your answer.

üß∂ ‚úÖ ‚¨ÜÔ∏è **At this point TEAM MEMBER 1 should knit the Rmd, commit, and push their changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.**

------------------------------------------------------------------------

**2Ô∏è‚É£ TEAM MEMBER 2 should now pull ‚¨áÔ∏è before doing anything else. They should then write the answers to Exercises 2 and 3, and then commit and and push their changes. Everyone else: participate, help out, but no typing in the R Markdown document and no committing/pushing!**
```{marginfigure}
If someone in your team is participating remotely, TEAM MEMBER 2 will need to share their screen.
```

We do the wide to long conversation using `pivot_longer()`.
The animation below show how this function works, as well as its counterpart `pivot_wider()`.

```{r echo=FALSE}
knitr::include_graphics("img/tidyr-longer-wider.gif")
```

Quick reminder: the function has the following arguments:

```{r eval=FALSE}
pivot_longer(data, cols, names_to = "name")
```

-   The first argument is `data` as usual.
-   The second argument, `cols`, specifies the columns to pivot into longer format.
-   The third argument, `names_to`, is the name of the column where column names of pivoted variables go (character string).
-   The fourth argument, `values_to` is the name of the column where data in pivoted variables go (character string).

2.  Fill in the blanks in the following code chunk to pivot the staff data longer and save it as a new data frame called `staff_long`.

```{r eval=FALSE}
staff_long <- ___ %>%
  ___(
    cols = ___, 
    names_to = "___",
    values_to = "___"
    )
```

3.  Inspect `staff_long` to check if your guess regarding number of rows from Exercise 1 was correct.

üß∂ ‚úÖ ‚¨ÜÔ∏è **At this point TEAM MEMBER 2 should knit the Rmd, commit, and push their changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.**

------------------------------------------------------------------------

**TEAM MEMBER 3 should now pull ‚¨áÔ∏è before doing anything else. They should then write the answers to Exercises 4 and 5, and then commit and and push their changes. Everyone else: participate, help out, but no typing in the R Markdown document and no committing/pushing!**
```{marginfigure}
If someone in your team is participating remotely, TEAM MEMBER 3 will need to share their screen.
```

4.  We'll plot instructional staff employment trends as a line plot. A possible approach for creating a line plot where we color the lines by faculty type is the following, but it doesn't quite look right. What's wrong with the graph?  (You don't need to say how to fix it here---that's the next question!)

```{r eval=FALSE}
staff_long %>%
  ggplot(aes(x = year, y = value, color = faculty_type)) +
  geom_line()
```

5.  Next, add a `group` aesthetic to the plot (grouping by `faculty_type`) and plot again. What does the plot reveal about instructional staff employment trends over the years?

üß∂ ‚úÖ ‚¨ÜÔ∏è **At this point TEAM MEMBER 3 should knit the Rmd, commit, and push their changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.**

------------------------------------------------------------------------

**TEAM MEMBER 4 should now pull ‚¨áÔ∏è before doing anything else. They should then write the answers to Exercise 6, and then commit and and push their changes. Everyone else: participate, help out, but no typing in the R Markdown document and no committing/pushing! (If your team has fewer than 4 people, just move back to the first member.)**
```{marginfigure}
If someone in your team is participating remotely, TEAM MEMBER 4 will need to share their screen.
```

6.  Improve the line plot from the previous exercise by fixing up its labels (title, axis labels, and legend label) as well as any other components you think could benefit from improvement.

üß∂ ‚úÖ ‚¨ÜÔ∏è **At this point TEAM MEMBER 4 should knit the Rmd, commit, and push their changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.**

------------------------------------------------------------------------

**The next team member should now pull ‚¨áÔ∏è before doing anything else. They should then write the answers to Exercise 7 and 8, and then commit and and push their changes. Everyone else: participate, help out, but no typing in the R Markdown document and no committing/pushing!**
```{marginfigure}
If someone in your team is participating remotely, remember to share screens.
```

7.  Suppose the objective of this plot was to show that the proportion of part-time faculty have gone up over time compared to other instructional staff types. What changes would you propose making to this plot to tell this story? Write down your idea(s). The more precise you are, the easier the next step will be. Get creative, and think about how you can modify the dataset to give you new/different variables to work with.
8.  Implement at least one of these ideas you came up with in the previous exercise. You should produce an improved data visualisation and accompany your visualisation with a brief paragraph describing the choices you made in your improvement, specifically discussing what you didn't like in the original plot and why, and how you addressed them in the visualisation you created.

üß∂ ‚úÖ ‚¨ÜÔ∏è **At this point the team member should knit the Rmd, commit, and push their changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.**

::: {.marker}
Aim to make it to this point during the workshop.
:::

# Wrapping up

Go back through your write up to make sure you're following coding style guidelines we discussed in class.
Make any edits as needed.

Also, make sure all of your R chunks are properly labelled and your figures are reasonably sized.

Once the last person pushes their final changes, others should pull the changes and knit the R Markdown document to confirm that they can reproduce the report.

## More sad plots

Want to see more sad plots?

-   [Flowing Data - Ugly Charts](https://flowingdata.com/category/visualization/ugly-visualization/)
-   [Reddit - Data is ugly](https://www.reddit.com/r/dataisugly/)
-   [Missed Opportunities and Graphical Failures](http://www.datavis.ca/gallery/missed.php)
-   [(Mostly Bad) Graphics and Tables](http://users.stat.umn.edu/~rend0020/Teaching/STAT8801-resources/graphics/index.html)
-   [Take a sad plot and make it better](https://apreshill.github.io/ohsu-biodatavis/slides.html#1)
